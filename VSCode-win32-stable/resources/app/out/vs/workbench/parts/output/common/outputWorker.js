/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){var e=["vs/workbench/parts/output/common/outputWorker","require","exports","vs/base/common/winjs.base","vs/editor/common/services/resourceService","vs/base/common/uri","vs/base/common/strings","vs/base/common/arrays","vs/base/common/paths","vs/editor/common/core/range"],r=function(r){for(var t=[],n=0,o=r.length;n<o;n++)t[n]=e[r[n]];return t},t=this&&this.__decorate||function(e,r,t,n){var o,s=arguments.length,i=s<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(s<3?o(i):s>3?o(r,t,i):o(r,t))||i);return s>3&&i&&Object.defineProperty(r,t,i),i},n=this&&this.__param||function(e,r){return function(t,n){r(t,n,e)}};define(e[0],r([1,2,3,4,5,6,7,8,9]),function(e,r,o,s,i,c,a,u,p){"use strict";var f=function(){function e(e,r){this._modeId=e,this.resourceService=r,this._workspaceResource=null,this.patterns=[]}return e.prototype.configure=function(r){return this._workspaceResource=r,this.patterns=e.createPatterns(this._workspaceResource),o.TPromise.as(void 0)},e.prototype.provideLinks=function(r){var t=this,n=[];if(!this.patterns.length)return o.TPromise.as(n);for(var s=this.resourceService.get(r),c={toResource:function(e){return"string"==typeof e&&t._workspaceResource?i["default"].file(u.join(t._workspaceResource.fsPath,e)):null}},a=1,p=s.getLineCount();a<=p;a++)n.push.apply(n,e.detectLinks(s.getLineContent(a),a,this.patterns,c));return o.TPromise.as(n)},e.createPatterns=function(e){var r=[],t=a.distinct([u.normalize(e.fsPath,!0),u.normalize(e.fsPath,!1)]);return t.forEach(function(e){r.push(new RegExp(c.escapeRegExpCharacters(e)+"(\\S*) on line ((\\d+)(, column (\\d+))?)","gi")),r.push(new RegExp(c.escapeRegExpCharacters(e)+"(\\S*):line ((\\d+)(, column (\\d+))?)","gi")),r.push(new RegExp(c.escapeRegExpCharacters(e)+"([^\\s\\(\\)]*)(\\s?\\((\\d+)(,(\\d+))?)\\)","gi")),r.push(new RegExp(c.escapeRegExpCharacters(e)+"([^:\\s\\(\\)<>'\"\\[\\]]*)(:(\\d+))?(:(\\d+))?","gi"))}),r},e.detectLinks=function(e,r,t,n){var o=[];return t.forEach(function(t){t.lastIndex=0;for(var s,i=0;null!==(s=t.exec(e));){var a=c.rtrim(s[1],".").replace(/\\/g,"/"),u=void 0;try{u=n.toResource(a).toString()}catch(f){continue}if(s[3]){var h=s[3];if(s[5]){var l=s[5];u=c.format("{0}#{1},{2}",u,h,l)}else u=c.format("{0}#{1}",u,h)}var m=c.rtrim(s[0],"."),g=e.indexOf(m,i);i+=g+m.length;var v={startColumn:g+1,startLineNumber:r,endColumn:g+1+m.length,endLineNumber:r};if(o.some(function(e){return p.Range.areIntersectingOrTouching(e.range,v)}))return;o.push({range:v,url:u})}}),o},e=t([n(1,s.IResourceService)],e)}();r.OutputWorker=f})}).call(this);
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/e6b4afa53e9c0f54edef1673de9001e9f0f547ae/vs\workbench\parts\output\common\outputWorker.js.map
