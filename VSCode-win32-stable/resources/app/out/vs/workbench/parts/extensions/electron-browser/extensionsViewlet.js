/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){var e=["exports","require","vs/base/browser/ui/list/listPaging","vs/base/common/event","vs/workbench/parts/extensions/electron-browser/extensionsList","vs/base/browser/dom","vs/base/common/lifecycle","vs/platform/instantiation/common/instantiation","vs/workbench/parts/extensions/electron-browser/extensionsActions","vs/css!vs/workbench/parts/extensions/electron-browser/media/extensionsViewlet","vs/base/browser/ui/actionbar/actionbar","vs/css!vs/base/browser/ui/list/list","vs/base/common/arrays","vs/workbench/parts/extensions/electron-browser/extensionsWidgets","vs/workbench/parts/extensions/electron-browser/extensionsViewlet","vs/base/browser/ui/list/listWidget","vs/base/common/async","vs/base/common/winjs.base","vs/base/common/errors","vs/base/browser/event","vs/base/browser/keyboardEvent","vs/base/common/keyCodes","vs/workbench/browser/viewlet","vs/base/common/paging","vs/platform/telemetry/common/telemetry","vs/workbench/parts/extensions/electron-browser/extensions","vs/platform/extensionManagement/common/extensionManagement","vs/workbench/parts/extensions/electron-browser/extensionsInput","vs/platform/progress/common/progress","vs/workbench/services/editor/common/editorService","vs/nls!vs/workbench/parts/extensions/electron-browser/extensionsViewlet"],t=function(t){for(var n=[],o=0,s=t.length;o<s;o++)n[o]=e[t[o]];return n};define(e[2],t([1,0,12,15,3,11]),function(e,t,n,o,s){"use strict";var i=function(){function e(e,t){this.renderer=e,this.modelProvider=t}return Object.defineProperty(e.prototype,"templateId",{get:function(){return this.renderer.templateId},enumerable:!0,configurable:!0}),e.prototype.renderTemplate=function(e){var t=this.renderer.renderTemplate(e);return{data:t,disposable:{dispose:function(){}}}},e.prototype.renderElement=function(e,t,n){var o=this;n.disposable.dispose();var s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,n.data);var i=s.resolve(e);n.disposable={dispose:function(){return i.cancel()}},this.renderer.renderPlaceholder(e,n.data),i.done(function(t){return o.renderer.renderElement(t,e,n.data)})},e.prototype.disposeTemplate=function(e){e.disposable.dispose(),e.disposable=null,this.renderer.disposeTemplate(e.data),e.data=null},e}(),r=function(){function e(e,t,n){var s=this,r=n.map(function(e){return new i(e,function(){return s.model})});this.list=new o.List(e,t,r)}return Object.defineProperty(e.prototype,"onDOMFocus",{get:function(){return this.list.onDOMFocus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onFocusChange",{get:function(){var e=this;return s.mapEvent(this.list.onFocusChange,function(t){var n=t.elements,o=t.indexes;return{elements:n.map(function(t){return e._model.get(t)}),indexes:o}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){var e=this;return s.mapEvent(this.list.onSelectionChange,function(t){var n=t.elements,o=t.indexes;return{elements:n.map(function(t){return e._model.get(t)}),indexes:o}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(e){this._model=e,(t=this.list).splice.apply(t,[0,this.list.length].concat(n.range(e.length)));var t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollTop",{get:function(){return this.list.scrollTop},enumerable:!0,configurable:!0}),e.prototype.focusNext=function(e,t){this.list.focusNext(e,t)},e.prototype.focusPrevious=function(e,t){this.list.focusPrevious(e,t)},e.prototype.selectNext=function(e,t){this.list.selectNext(e,t)},e.prototype.selectPrevious=function(e,t){this.list.selectPrevious(e,t)},e.prototype.getFocus=function(){return this.list.getFocus()},e.prototype.setSelection=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];(n=this.list).setSelection.apply(n,e);var n},e.prototype.layout=function(e){this.list.layout(e)},e}();t.PagedList=r});var n=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__param||function(e,t){return function(n,o){t(n,o,e)}};define(e[4],t([1,0,5,6,10,7,8,13]),function(e,t,s,i,r,a,c,l){"use strict";var p=function(){function e(){}return e.prototype.getHeight=function(){return 62},e.prototype.getTemplateId=function(){return"extension"},e}();t.Delegate=p;var u={icon:!0,label:!0},h=function(){function e(e){this.instantiationService=e}return Object.defineProperty(e.prototype,"templateId",{get:function(){return"extension"},enumerable:!0,configurable:!0}),e.prototype.renderTemplate=function(e){var t=s.append(e,s.emmet(".extension")),n=s.append(t,s.emmet(".icon")),o=s.append(t,s.emmet(".details")),i=s.append(o,s.emmet(".header")),a=s.append(i,s.emmet("span.name")),c=s.append(i,s.emmet("span.version.ellipsis")),l=s.append(i,s.emmet("span.install-count")),p=s.append(i,s.emmet("span.ratings")),u=s.append(o,s.emmet(".description.ellipsis")),h=s.append(o,s.emmet(".footer")),d=s.append(h,s.emmet(".author.ellipsis")),v=new r.ActionBar(h,{animated:!1}),f=[];return{extension:null,element:t,icon:n,name:a,version:c,installCount:l,ratings:p,author:d,description:u,actionbar:v,disposables:f}},e.prototype.renderPlaceholder=function(e,t){t.disposables=i.dispose(t.disposables),s.addClass(t.element,"loading"),t.extension=null,t.icon.style.backgroundImage="",t.name.textContent="",t.version.textContent="",t.installCount.style.display="none",t.ratings.style.display="none",t.author.textContent="",t.description.textContent="",t.actionbar.clear()},e.prototype.renderElement=function(e,t,n){n.disposables=i.dispose(n.disposables),s.removeClass(n.element,"loading"),n.extension=e,n.icon.style.backgroundImage='url("'+e.iconUrl+'")',n.name.textContent=e.displayName,n.author.textContent=e.publisherDisplayName,n.description.textContent=e.description,n.installCount.style.display="initial",n.ratings.style.display="initial";var o=this.instantiationService.createInstance(l.Label,n.version,e,function(e){return e.version}),r=this.instantiationService.createInstance(l.InstallWidget,n.installCount,e,{small:!0}),a=this.instantiationService.createInstance(l.RatingsWidget,n.ratings,e,{small:!0}),p=this.instantiationService.createInstance(c.CombinedInstallAction,e),h=this.instantiationService.createInstance(c.UpdateAction,e),d=this.instantiationService.createInstance(c.EnableAction,e);n.actionbar.clear(),n.actionbar.push([d,h,p],u),n.disposables.push(o,r,a,p,h,d)},e.prototype.disposeTemplate=function(e){e.actionbar=i.dispose(e.actionbar)},e=n([o(0,a.IInstantiationService)],e)}();t.Renderer=h});var s=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define(e[14],t([1,0,30,16,17,6,18,3,19,20,21,22,5,23,24,2,7,4,25,8,26,27,28,29,9]),function(e,t,i,r,a,c,l,p,u,h,d,v,f,m,b,y,x,g,w,S,E,I,C,A){"use strict";var k=function(e){function t(t,n,o,s,i,a,c){e.call(this,w.VIEWLET_ID,t),this.galleryService=n,this.extensionService=o,this.progressService=s,this.instantiationService=i,this.editorService=a,this.extensionsWorkbenchService=c,this.disposables=[],this.searchDelayer=new r.ThrottledDelayer(500)}return s(t,e),t.prototype.create=function(t){var n=this;e.prototype.create.call(this,t),t.addClass("extensions-viewlet"),this.root=t.getHTMLElement();var o=f.append(this.root,f.emmet(".header"));this.searchBox=f.append(o,f.emmet("input.search-box")),this.searchBox.placeholder=i.localize(0,null),this.disposables.push(f.addStandardDisposableListener(this.searchBox,f.EventType.FOCUS,function(){return f.addClass(n.searchBox,"synthetic-focus")})),this.disposables.push(f.addStandardDisposableListener(this.searchBox,f.EventType.BLUR,function(){return f.removeClass(n.searchBox,"synthetic-focus")})),this.extensionsBox=f.append(this.root,f.emmet(".extensions"));var s=new g.Delegate,r=this.instantiationService.createInstance(g.Renderer);this.list=new y.PagedList(this.extensionsBox,s,[r]);var c=u.domEvent(this.searchBox,"keydown"),l=p.mapEvent(c,function(e){return new h.StandardKeyboardEvent(e)}),v=p.filterEvent(l,function(e){return e.keyCode===d.KeyCode.Enter}),m=p.filterEvent(l,function(e){return e.keyCode===d.KeyCode.Escape}),b=p.filterEvent(l,function(e){return e.keyCode===d.KeyCode.UpArrow}),x=p.filterEvent(l,function(e){return e.keyCode===d.KeyCode.DownArrow}),w=p.filterEvent(l,function(e){return e.keyCode===d.KeyCode.Tab});v(this.onEnter,this,this.disposables),m(this.onEscape,this,this.disposables),b(this.onUpArrow,this,this.disposables),x(this.onDownArrow,this,this.disposables),w(this.onTab,this,this.disposables);var S=u.domEvent(this.searchBox,"input");S(function(){return n.triggerSearch()},null,this.disposables),this.list.onDOMFocus(function(e){n.focusInvokedByTab||n.searchBox.focus(),n.focusInvokedByTab=!1},null,this.disposables);var E=p.filterEvent(p.mapEvent(this.list.onSelectionChange,function(e){return e.elements[0]}),function(e){return!!e});return E(this.onExtensionSelected,this,this.disposables),a.TPromise.as(null)},t.prototype.setVisible=function(t){var n=this;return e.prototype.setVisible.call(this,t).then(function(){t?(n.searchBox.focus(),n.searchBox.setSelectionRange(0,n.searchBox.value.length),n.triggerSearch(!0,!0)):n.list.model=new m.PagedModel([])})},t.prototype.focus=function(){this.searchBox.focus()},t.prototype.layout=function(e){var t=e.height;this.list.layout(t-38)},t.prototype.getActions=function(){return this.clearAction||(this.clearAction=this.instantiationService.createInstance(S.ClearExtensionsInputAction,S.ClearExtensionsInputAction.ID,S.ClearExtensionsInputAction.LABEL)),[this.clearAction]},t.prototype.getSecondaryActions=function(){return[this.instantiationService.createInstance(S.ShowInstalledExtensionsAction,S.ShowInstalledExtensionsAction.ID,S.ShowInstalledExtensionsAction.LABEL),this.instantiationService.createInstance(S.ListOutdatedExtensionsAction,S.ListOutdatedExtensionsAction.ID,S.ListOutdatedExtensionsAction.LABEL),this.instantiationService.createInstance(S.ShowExtensionRecommendationsAction,S.ShowExtensionRecommendationsAction.ID,S.ShowExtensionRecommendationsAction.LABEL),this.instantiationService.createInstance(S.ShowPopularExtensionsAction,S.ShowPopularExtensionsAction.ID,S.ShowPopularExtensionsAction.LABEL)]},t.prototype.search=function(e,t){void 0===t&&(t=!1),this.searchBox.value=e,this.triggerSearch(t)},t.prototype.triggerSearch=function(e,t){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1);var o=this.searchBox.value;this.clearAction.enabled=!!o,this.searchDelayer.trigger(function(){return n.doSearch(o,t)},e||!o?0:500)},t.prototype.doSearch=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=!1);var o,s=this.progressService.show(!0);return o=e?/@outdated/i.test(e)?this.extensionsWorkbenchService.queryLocal().then(function(e){return e.filter(function(e){return e.outdated})}):/@popular/i.test(e)?this.extensionsWorkbenchService.queryGallery({sortBy:E.SortBy.InstallCount}):/@recommended/i.test(e)?this.extensionsWorkbenchService.getRecommendations():this.extensionsWorkbenchService.queryGallery({text:e}):this.extensionsWorkbenchService.queryLocal().then(function(e){return 0===e.length&&t&&n.search("@popular",!0),e}),r.always(o,function(){return s.done()}).then(function(e){return new m.PagedModel(e)}).then(function(e){return n.list.model=e})},t.prototype.onExtensionSelected=function(e){this.editorService.openEditor(this.instantiationService.createInstance(I.ExtensionsInput,e)).done(null,l.onUnexpectedError)},t.prototype.onEnter=function(){(e=this.list).setSelection.apply(e,this.list.getFocus());var e},t.prototype.onEscape=function(){this.searchBox.value="",this.triggerSearch(!0)},t.prototype.onUpArrow=function(){this.list.focusPrevious()},t.prototype.onDownArrow=function(){this.list.focusNext()},t.prototype.onTab=function(){this.focusInvokedByTab=!0},t.prototype.dispose=function(){this.disposables=c.dispose(this.disposables),e.prototype.dispose.call(this)},t=n([o(0,b.ITelemetryService),o(1,E.IExtensionGalleryService),o(2,E.IExtensionManagementService),o(3,C.IProgressService),o(4,x.IInstantiationService),o(5,A.IWorkbenchEditorService),o(6,w.IExtensionsWorkbenchService)],t)}(v.Viewlet);t.ExtensionsViewlet=k})}).call(this);
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/e6b4afa53e9c0f54edef1673de9001e9f0f547ae/vs\workbench\parts\extensions\electron-browser\extensionsViewlet.js.map
